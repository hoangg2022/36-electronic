<!DOCTYPE html>
       <html>
       <head>
           <title>Login</title>
           <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
           <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
       </head>
       <body>
           <div class="login-container">
               <h2>36 Electronic Shop</h2>
               <div id="error-msg" style="display:none;"></div>
               <form id="login-form" class="auth-form">
                   <div class="input-group">
                       <input type="text" id="username" placeholder="Username" required>
                   </div>
                   <div class="input-group">
                       <input type="password" id="password" placeholder="Password" required>
                   </div>
                   <div class="remember">
                       <a href="#" id="forgot-link">Forgot Password?</a>
                       <a href="#" id="register-link">Register</a>
                   </div>
                   <button type="button" id="login-btn" class="login-btn">Login</button>
               </form>
               <div class="footer">© 2025 36 Electronic Shop</div>
           </div>
           <script>
               $(document).ready(function() {
                   $('#login-btn').click(function() {
                       var username = $('#username').val();
                       var password = $('#password').val();
                       console.log("Sending login request:", { username: username, password: password }); // Debug log
                       $.ajax({
                           url: '/login',
                           type: 'POST',
                           data: { username: username, password: password },
                           success: function(response) {
                               console.log("Received response:", response);
                               $('#error-msg').removeClass('success error').hide();
                               if (response.success) {
                                   $('#error-msg').text(response.message).addClass('success').show();
                                   if (response.redirect) {
                                       console.log("Redirecting to:", response.redirect);
                                       setTimeout(function() {
                                           window.location.href = response.redirect;
                                       }, 1000);
                                   }
                               } else {
                                   $('#error-msg').text(response.message).addClass('error').show();
                               }
                           },
                           error: function(xhr) {
                               console.log("AJAX error:", xhr);
                               $('#error-msg').text('Sai tên đăng nhập hoặc mật khẩu: ' + xhr.responseJSON.message).addClass('error').show();
                           }
                       });
                   });

                   $('#forgot-link').click(function(e) {
                       e.preventDefault();
                       window.location.href = '/forgot_password';
                   });

                   $('#register-link').click(function(e) {
                       e.preventDefault();
                       window.location.href = '/register';
                   });
               });
           </script>
       </body>
       </html>