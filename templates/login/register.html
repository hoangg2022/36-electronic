<!DOCTYPE html>
<html>
<head>
    <title>Register</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="login-container">
        <h2>Register</h2>
        <div id="register-error-msg" style="display:none;"></div>
        <form id="register-form" class="auth-form">
            <div class="input-group">
                <input type="text" id="username" placeholder="Username" required>
            </div>
            <div class="input-group">
                <input type="email" id="email" placeholder="Email" required>
            </div>
            <div class="input-group">
                <input type="password" id="password" placeholder="Password" required>
            </div>
            <div class="input-group">
                <input type="text" id="full_name" placeholder="Full Name" required>
            </div>
            <div class="input-group">
                <input type="date" id="birth_date" required>
            </div>
            <button type="button" id="register-btn" class="register-btn">Register</button>
            <div class="remember">
                <a href="#" id="login-link">Back to Login</a>
            </div>
        </form>
        <div class="footer">Â© 2025 36 Electronic Shop</div>
    </div>
    <script>
        $(document).ready(function() {
            $('#register-btn').click(function() {
                var username = $('#username').val();
                var email = $('#email').val();
                var password = $('#password').val();
                var full_name = $('#full_name').val();
                var birth_date = $('#birth_date').val();
                $.ajax({
                    url: '/register',
                    type: 'POST',
                    data: { username: username, email: email, password: password, full_name: full_name, birth_date: birth_date },
                    success: function(response) {
                        $('#register-error-msg').removeClass('success error').hide();
                        if (response.success) {
                            $('#register-error-msg').text(response.message).addClass('success').show();
                            if (response.redirect) {
                                window.location.href = response.redirect;
                            }
                        } else {
                            $('#register-error-msg').text(response.message).addClass('error').show();
                        }
                    },
                    error: function(xhr) {
                        $('#register-error-msg').text('An error occurred').addClass('error').show();
                    }
                });
            });

            $('#login-link').click(function(e) {
                e.preventDefault();
                window.location.href = '/login';
            });
        });
    </script>
</body>
</html>